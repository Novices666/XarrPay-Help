# 站长应用
## 插件生成应用
:::tip
为了方便，app监控通知类通道的适配。
使用jk_wechat插件的模板   
对只需要二维码地址/图片的监控类插件做了界面化生成
:::

下面对软件界面对应填写参数做简单说明。
### 参数填写说明
:::tip
软件内置了演示数据，点击`查看示例`即可。多多参考示例内容！   
软件在对应操作顺序有标号，请按照顺序填写信息。
:::
![](https://s2.loli.net/2024/11/01/lzc4RwWYJBkubpF.png)
#### 1. 插件信息（部分说明）
- 别名
  - 即你插件的英文代码，建议监控类都以`jk_`开头，后面自定义。
- 类型
  - 即你的支付类型，比如你是wx类的插件，可以填wxpay,百度支付可以填写baidupay等。
可以自定义，但是切记，这里的类型需要与`后台>支付通道>支付管理>代码`进行对应
- 包名
  - 即你需要监控的app的包名，自行查找。

#### 2. 插件常量，即你插件所包含的所有通道
建议常量名以`pay_`+`内容`，比如内容为baidu_app，常量名就是`pay_baidu_app`
- 如果有多个，像示例那样，则继续使用`_`拼接差别。例如：
  - wx店员：`pay_wxpay_dianyuan`+`wxpay_dianyuan`
  - wxapp：`pay_wxpay_app`+`wxpay_app`   

增加完成后点击`读取常量`

#### 3. 通道名称，即设置2中对应的中文名和表单类型。
- `code`和`表单类型`可进行下拉选择

#### 4. 匹配数据，即适配通知
:::tip
转发消息获取可参考app监控配置，然后在项目日志中获取，后续写完获取接口，在这里贴出。   
一个插件可对应多个通知，参考示例数据。
:::
- 标题：转发消息中的`title`字段
- 通知正则：转发消息中的`msg`字段
  - 将其中的金额使用`(?<amount>[\\d\\.]+)`进行替换，比如：
    - `微信支付：微信支付收款(?<amount>[\\d\\.]+)元`

- code：下拉选择，通知正则对应的插件。

### 已知问题
1. 生成后的插件中，人民币符号`￥`错误
使用文本工具打开生成后的`plugin.lua`，使用下方的符号进行替换
```
¥
```
可以使用`ctrl`+`h`进行快速替换